
@{
    ViewData["Title"] = "AddIndex";
}

<h1>AddIndex</h1>
<script src="~/js/vue.js"></script>
<script src="~/js/axios.min.js"></script>

<script src="~/layui-v2.5.6/layui/layui.js"></script>
<link href="~/layui-v2.5.6/layui/css/layui.css" rel="stylesheet" />

<div class="addDiv">
    <div class="layui-form-item">
        <label class="layui-form-label">数字</label>
        <div class="layui-input-block">
            <input type="text" name="title" lay-verify="title" autocomplete="off" class="layui-input" v-model="obj.SJId">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">操作人</label>
        <div class="layui-input-block">
            <input type="text" name="title" lay-verify="title" autocomplete="off" class="layui-input" v-model="obj.JName">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">内容</label>
        <div class="layui-input-block">
            <input type="text" name="title" lay-verify="title" autocomplete="off" class="layui-input" v-model="obj.JNei">
        </div>
    </div>
    <div class="layui-inline">
        <label class="layui-form-label">日期</label>
        <div class="layui-input-inline" style="margin-left:30px">
            <input type="date" name="date" id="date" lay-verify="date" autocomplete="off" class="layui-input" v-model="obj.JTime">
        </div>
    </div>
    <button type="button" class="layui-btn layui-btn-radius" v-on:click="Add()">提交</button>
</div>

  

<script>
    var data = {
        obj: {
            SJId: 1,
            JName: "王则波",
            JNei: "初审通过",
            JTime: "",
        },
    };
    new Vue({
        el: '.addDiv',
        data,
        methods: {
            Add() {
                var m = JSON.stringify(this.obj);
                axios.post("http://localhost:51166/api/User/Add","m="+m)
                    .then(res => {
                        if (res.data > 0) {
                            alert("添加成功");
                        }
                        else {
                            alert("添加失败");
                        }
                    })
                //  axios【get】请求
                //axios.get("http://localhost:51166/api/User/Add", {
                //    headers: {
                //        "Content-Type": 'application/x-www-form-urlencoded',
                //        "Accepts": 'application/x-www-form-urlencoded'
                //    },
                //    params: { jsonModel: JSON.stringify(this.obj) },
                //}).then(res => {
                //    if (res.status == 200) {  //判断服务器是否返回成功
                //        alert('添加成功!');
                //        location.href = "Index";
                //    } else {
                //        alert('添加失败!');
                //        location.reload();
                //    }
                //});
            }
        }
    })
</script>


